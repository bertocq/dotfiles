#!/bin/bash

# Bash
alias c='bat'
alias cat='bat'
alias ll='ls -FGlAhp'
alias reload='source ~/.bash_profile'
alias f='open -a Finder ./' # Opens current directory with macos Finder
alias rmrf='rm -rf'

# Git
alias g='git'
alias gemc='git_edit_merge_conflicts'
alias galias='git config --get-regexp alias'
## Commiting
alias ga='git ga'
alias gaa='git gaa'
alias gai='git gai'
alias gc='git commit'
alias gcm='git commit -m'
## Github
alias PR='git PR'
alias PRO='~./dotfiles/github-pull-request'
## History
alias gl='git gl -20'
alias gla='git gl'
alias gll='git log'
alias glf='git glf'
alias up='git up'
## Maintenance
alias cleanup='clearb;rpo;ggc'
alias clearb='git clearb'
alias ggc='git gc --auto'
alias rpo='git rpo'
alias ggca='git gc --aggressive'
## Master branch actions
alias com='git co master; p'
alias grm='git rebase master'
## Pushing & Pulling
alias p='git p'
alias P='git push'
alias PU='git pu'
alias PUF='git pu --force-with-lease'
## Status
alias cgs='clear; git st' # Clear screen and git status
alias gd='git gd'
alias gdf='git gdf'
alias gds='git gds'
alias gdsf='git gdsf'
alias gs='git st'

# Ruby
alias r='ruby'
## Rubocoping
alias fix_ruby="grep -E 'rb|rake|Gemfile|ru' | xargs rubocop -a"
alias ru='git gsp | fix_ruby' # autocorrect ruby files listed on working directory & staging area
alias rum='git gdmaster | fix_ruby' # autocorrect ruby files in diff between current branch and master
alias rus='git gdstable | fix_ruby' # autocorrect ruby files in diff between current branch and stable
alias solocop='rubocop -a --only' # autocorrect using a single cop by name (passed as argument)
# Bundle
alias b='bundle'
alias be='b exec'
alias ber='be bin/rake'
## RSpec
alias sp='be rspec --order rand'
alias spd='be rspec --order rand --format documentation'
alias spt='sp --tag'
alias spc='sp --color --format documentation --require spec_helper --require rails_helper spec'
alias sps='sp --seed'
alias spb='HEADFUL=true sp'
alias spm='sp `git ls-files -m \*_spec.rb`'
## Rails
alias rc='rails c'
alias rs='rails s'
alias rg='rails generate'
alias dbmigrate='ber db:migrate RAILS_ENV=development; ber db:migrate RAILS_ENV=test'
alias dbrollback='ber db:rollback RAILS_ENV=development; ber db:rollback RAILS_ENV=test'
alias dbreset='ber db:drop; ber db:create; dbmigrate; ber db:seed'
## Jekyll
alias js='be jekyll serve --watch'
## Foreman
alias fs='foreman start'
alias fss=' foreman start -m all=1,search=0'
## Elasticsearch
alias estop='brew services stop elasticsearch@5.6'
alias estart='brew services start elasticsearch@5.6'

## Brew services
alias bws='brew services list'

# Dev
alias s='subl'
alias unused='git ctags; cat ./.git/tags | unused --stdin -C'

# OSX
alias btime="pmset -g batt | awk '/^ /{print \$5}'"
alias cmds="sed 's/|/\n/g' ~/.bash_history | awk '{CMD[\$1]++;count++;}END { for (a in CMD)print CMD[a] \" \" CMD[a]/count*100 \"% \" a;}' | grep -v \"./\" | column -c3 -s \" \" -t | sort -nr | nl |  head -n50"
alias lock='open -a /System/Library/Frameworks/ScreenSaver.framework/Versions/A/Resources/ScreenSaverEngine.app'
alias webcam='sudo killall VDCAssistant; sudo killall AppleCameraAssistant'

## Maintenance
alias bw='brew'
alias brew_maintenance='bw doctor; bw update; bw upgrade; bw cleanup -s; rm -rf "$(brew --cache)"; brewfile'
alias bb='bw bundle --file Brewfile'
alias bbdump='bb dump --force --describe'
alias brewfile='(cd ~/dotfiles/tools; bbdump; bb cleanup --force; bb check; bbdump)'
alias update='gem update --system; brew upgrade --cask; brew_maintenance; sudo softwareupdate -ia; mas upgrade'
alias freedisk='diskutil secureErase freespace 0 /' # Afterwards: Reboot; Disk Utility "First Aid"
alias diskusage='ncdu --color dark -rr -x'
# Empty the Trash on all mounted volumes and the main HDD
# Also, clear Appleâ€™s System Logs to improve shell startup speed
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

# Tools
alias wifi='wifi-password'
alias esen='trans es:'
alias enes='trans :es'
alias pu='paste_unindented'
alias yt='youtube-dl'
alias yta='yt -f 140 -o "~/Downloads/music/%(title)s.%(ext)s" '
alias ytv='yt -f 22 -o "~/Downloads/video/%(title)s.%(ext)s" '
alias ytf='yt -F'
alias sys='neofetch'

## Taskwarrior
alias t='task'
alias ta='task add'
alias tu='task undo'
alias td='task $1 done'
alias tm='task $1 modify'
alias tl='task info +LATEST' # Shows the info of the lastest added task
alias tml='task $(task +LATEST _id) modify' # Modify the lastest added task
alias tan='task $1 annotate' # Adds a simple annotation
alias tanl='task $(task +LATEST _id) annotate' # Adds a simple annotation to latest added task
alias tn='tasknote' # Opens a notes file for the task
alias tnl='tasknote $(task +LATEST _id)' # Opens a notes file for the latest added task
alias tnv='tasknote $1 v' # Cat's the notes file for the task
alias today='task +TODAY list' # Shows what's for today
alias tall='task list status:pending' # Shows all pending tasks
alias ts='task synchronize' # Uses on-launch hook to sync with private repo
alias tt='ta RecurrentTask relativeRecurrenceDue=15d relativeRecurrenceWait:1w'
